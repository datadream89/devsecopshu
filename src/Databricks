import java.io.File
import com.typesafe.config.{Config, ConfigFactory}
import scala.collection.JavaConverters._

object ConfigParser {
  def main(args: Array[String]): Unit = {
    val folderPath = "configs/" // Update the folder path as needed

    val configFileNames: List[String] = getListOfConfigFiles(folderPath)

    // Parse each config file and extract sections and their values dynamically
    for (configFile <- configFileNames) {
      val config: Config = ConfigFactory.parseFile(new File(configFile))
      processConfig(config)
    }
  }

  def processConfig(config: Config): Unit = {
    config.root().keySet().asScala.foreach { section =>
      val sectionConfig = config.getConfig(section)
      val value1 = sectionConfig.getString("ser")
      val value2 = sectionConfig.getString("frt")
      // Here, you can define your function and process the section and values as needed
      println(s"Processing section: $section with value1: $value1 and value2: $value2")
    }
  }

  def getListOfConfigFiles(folderPath: String): List[String] = {
    val folder = new File(folderPath)
    if (folder.exists() && folder.isDirectory) {
      folder.listFiles().filter(_.isFile).map(_.getAbsolutePath).toList
    } else {
      throw new IllegalArgumentException("Invalid folder path")
    }
  }
}
