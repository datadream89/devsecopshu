import java.io.File
import java.nio.file.{Files, Paths}

import com.typesafe.config.{Config, ConfigFactory, ConfigObject}

object ConfigParser {
  def main(args: Array[String]): Unit = {
    val folderPath = "configs/" // Update the folder path as needed

    val configFileNames: List[String] = getListOfConfigFiles(folderPath)

    // Parse each config file and extract sections and their keys dynamically
    for (configFile <- configFileNames) {
      val config: Config = ConfigFactory.parseFile(new File(configFile))
      val rootConfig: ConfigObject = config.root()

      for {
        sectionEntry <- rootConfig.entrySet().toArray
        section <- Option(sectionEntry.asInstanceOf[java.util.Map.Entry[String, ConfigObject]])
        keyEntry <- section.getValue.entrySet().toArray
        key <- Option(keyEntry.asInstanceOf[java.util.Map.Entry[String, AnyRef]])
      } {
        val sectionName = section.getKey
        val keyName = key.getKey
        val value = key.getValue
        println(s"[$configFile][$sectionName][$keyName]: $value")
      }
    }
  }

  def getListOfConfigFiles(folderPath: String): List[String] = {
    val folder = new File(folderPath)
    if (folder.exists() && folder.isDirectory) {
      folder.listFiles().filter(_.isFile).map(_.getAbsolutePath).toList
    } else {
      throw new IllegalArgumentException("Invalid folder path")
    }
  }
}
